<chf-card>
  <div card-content class="centered-card chinese">
    <div class="floating-icon">
      <fa-icon [class]="result()" [icon]="resultIcon" size="lg" />
    </div>
    <!-- Spans will be hidden using CSS if they are empty -->
    @if (diff) {
      <span>
        <ng-container
          *ngTemplateOutlet="diffText; context: { $implicit: diff.characters }"
        />
      </span>
      <span class="chf-pinyin-font">
        <ng-container *ngTemplateOutlet="diffText; context: { $implicit: diff.pinyin }" />
      </span>
    } @else {
      <span>{{ content().characters }}</span>
      <span class="chf-pinyin-font">{{ content().pinyin }}</span>
    }
  </div>
</chf-card>

<ng-template #diffText let-diff>
  @for (char of diff; track $index) {
    <span class="diff-character" [class]="char.type">{{ char.char }}</span>
  }
</ng-template>
